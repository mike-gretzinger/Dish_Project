<?xml version="1.0"?>
<testCase version="9.1.1.202209201235">
    <general>
        <documentation>5G_DEREG_013 UDM initiated de-registration - with PDU - idle mode</documentation>
        <tags>5G_DEREG_013</tags>
        <notes>Test Purpose: The purpose of this test is to verify the successfully UDM initiate de-Registration of UE with PDU session, UE is in Idle mode.
Pre-requisites/Test Environment:
•\tUE with DISH SIM.
Test Dependencies: 
•\tUE is registered with 5G network.
Test parameter and Tools:
•\tInternal log and Wireshark.
Test Procedure:
•\tUE attaches and registers to 5G network.
•\tUE establishes PDU session.
•\tWait for UE to go in idle state.
•\tEnsure the UE IDLE mode state in AMF: cmm subscriber show --imsi &lt;imsi&gt; | grep mState.
•\tVerify on SMF that UE has existing PDU session: show mobile-gateway pdn pdu-session.
•\tUDR/UDM must initiate the delete/purge request by using SPML command/PGW GUI.
•\tEnsure in AMF UE must be deregistered state by using show –imsi | grep mState command.
Remarks: 
•\t3GPP TS References - 3GPP TS 23.502 version 16.5.0 Release 16, TS 23.502 4.2.2.3.2,4.2.2.3.3 Release 17
•\tCall Flow References - E2E Call Flow Document Appendix Section 2.7.
Expected Result/Post Condition:  
•\tVerify in UDR subscriber profile, UE must be deregistered PurgeFlag= true using ldap command.
•\tVerify UDM sends Nudm_UECM_DeregistrationNotification request to AMF.
•\tVerify AMF responds with Nudm_UECM_DeregistrationNotificationAck request to UDM, after sending deregistration request to UE.
•\tVerify AMF sends Nsmf_PDUSession_RealeaseSMContext request to SMF for releasing existing PDU session.
•\tVerify that AMF sends &quot;Deregistration Request&quot; with 5GMM cause &quot;Implicitly deregistered (10)&quot;
</notes>
        <language>Python</language>
    </general>
    <procedures>
        <item name="main">
            <steps>
                <item guid="fd225321-9785-493a-8589-ccd2bdc06b89" action="comment" useFieldsInCommand="false">
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e3971197-11d3-4f98-b22e-ebe81a091c9f" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Define Landslide Library Key, project_id; INIT instance_id aka tc_id, failure_originators_list and write_cause_code_data</body>
                    </command>
                    <nestedSteps>
                        <item guid="5c6dc980-e79e-478a-8de2-c7f935513032" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Local process driver variable init. (Instence level parameters)</body>
                            </command>
                            <nestedSteps>
                                <item guid="3bdcbd9e-3b65-4afd-8dfb-76a6ed3a65f3" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Set the tmd variables</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="246ea740-9e12-4890-b176-c403a6011bc4" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>additional_validation = param(&apos;TMD_Name/process_manager/additional_validation&apos;, &apos;False&apos;)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="520c6f3a-416d-4d66-96aa-e84bbdf8086c" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>pcap_analysis = param(&apos;TMD_Name/process_manager/pcap_analysis&apos;, &quot;false&quot;)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="0dbb2621-835a-468e-9550-d7e2bae5a394" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>show_charts = param(&apos;TMD_Name/process_manager/show_charts&apos;, &quot;false&quot;)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="b4fccaf1-7119-4186-965a-f69cb7b6751a" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>libraryName = &quot;{Dish 5G Velocity Automation}&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="d35af99d-1fc2-4f71-aa6c-1ff046631e36" action="eval" skip="true" useFieldsInCommand="false">
                            <command>
                                <body>libraryName = &quot;{Dish 5G Velocity Scrub}&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="e0308a18-fa58-4feb-8080-1aae88df55dc" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>tc_id = info(&apos;testCaseName&apos;, &apos;main&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="7734bfa2-b610-48e7-9c01-15925fb1cef9" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>project_id = info(&apos;testCaseProject&apos;, &apos;main&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="733110f7-21df-459a-8faf-8659d76ba55a" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>failure_originators_list = []</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="59bd945c-c1a2-4535-ad59-1ebbb1d06501" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>write_cause_code_data = &quot;False&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="c220eb6e-b91d-42ff-9d17-7544cdecaac9" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>ls_criteria_data_error = &quot;False&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="547c5d87-702a-46d2-859b-54e8117c9158" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Call test_instance_init - Process will ensure the driving data is correct, Landslide configured and status checked. If you return all is well or there was an issue an we&apos;ve Aborted.</body>
                    </command>
                    <nestedSteps>
                        <item guid="b9536b23-29d6-4381-96c8-70811286aa67" action="call" useFieldsInCommand="false">
                            <command>
                                <body>project://ai_Dish_Production/DISH_5G/Utilities/dish_tc_utilities.fftc#test_instance_init -instance_id [tc_id] -ls_library_name [libraryName] -project_id [project_id]</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>count(mapped/Json/item)</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>instance_number</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                                <storeResponseAt>run_data_list</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="03903d07-198b-4557-b779-251c29f8165e" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Pre test NF activities</body>
                    </command>
                    <nestedSteps>
                        <item guid="c2215690-68e5-4618-b46c-e345a384e811" action="call" useFieldsInCommand="false">
                            <command>
                                <body>saveSubUDM()</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="73dc4165-46eb-4c5d-8c70-b967922f43cd" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Add a seperator; we&apos;ve completed the setup, start the Landslide process</body>
                    </command>
                    <nestedSteps>
                        <item guid="44dd0456-afd9-47fe-887f-b3b24ac2be15" action="call" useFieldsInCommand="false">
                            <command>
                                <body>project://ai_Dish_Production/DISH_5G/Utilities/utils.fftc#insert_devider_string -length 135</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="6bf2cbc9-a32e-4035-af71-c4b688afa891" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>##### Perform Landslide Test Procedure #####</body>
                    </command>
                    <nestedSteps>
                        <item guid="9651215d-535c-41ca-acf0-c6e995255fb2" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>start_time = int(round(time.time() * 1000))</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="8ff8ca84-3662-49d8-8dd9-f9aa937d9d1b" action="call" useFieldsInCommand="false">
                            <command>
                                <body>project://ai_Dish_Production/DISH_5G/Utilities/dish_landslide_rest_library.fftc#dish_execute_landslide_procedure -run_data_list [run_data_list]</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>count(mapped/Json/item)</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>exec_ls_testdata_item_cnt</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                <query>mapped/Json/reason</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>fail_reason</storageLocation>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>reason</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>value == 1</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>[fail_reason]</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>errorsAndWarnings = True</statement>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>errorsAndWarnings = False</statement>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>errorsAndWarnings</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>value == 1</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>[fail_reason]</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>errorsAndWarnings = True</statement>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="SkipRemainingRules">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>errorsAndWarnings = False</statement>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                                <storeResponseAt>exec_ls_testdata</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="a1b9eacc-4e74-4c6e-9007-eabc7af1539c" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>end_time = int(round(time.time() * 1000))</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="b0da8236-a89c-4086-b2de-756d2f27c5fe" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Check &apos;exec_ls_test_data&apos; for logged failure in criteria validation; Act accordingly.... 2 or 3 items we can work with all others counts are bad</body>
                            </command>
                            <nestedSteps>
                                <item guid="513a7f17-4ea0-4d9c-b425-4ba392bbbc5e" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>int(exec_ls_testdata_item_cnt) == 3:</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="1a4ed00a-8f27-4359-99fc-da72daf776b0" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(exec_ls_testdata)</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Json/item[1]</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>running_id</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Json/item[2]</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>failure_originator</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Json/item[3]</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>results_payload_uri_list</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="dc825d83-e915-45f1-9262-6feec19799ad" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>failure_originators_list.append(failure_originator)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="4ac1182f-8376-4766-89f2-9f87a8de034d" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>write_cause_code_data = &quot;True&quot;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="f0f11e13-318a-4561-9a4a-e9d86a53bc4d" action="elif" useFieldsInCommand="false">
                                    <command>
                                        <body>int(exec_ls_testdata_item_cnt) == 2:</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="c4c25d9c-b5c6-4f11-821f-22e74b01c29a" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(exec_ls_testdata)</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Json/item[1]</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>running_id</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Json/item[2]</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>results_payload_uri_list</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="e77da8a0-26df-427b-843c-50c5548109fc" action="else" useFieldsInCommand="false">
                                    <command>
                                        <body>ERROR in data data return shape, can&apos;t continue with PCAP validation</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="10a15802-096b-414a-bdf3-f3132cb0df3d" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>ls_criteria_data_error = &quot;True&quot;</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="977734b0-1c1e-4242-91db-4f7df0ae4347" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Check for additional Validation; Landslide Criteria Validation has been completed</body>
                    </command>
                    <nestedSteps>
                        <item guid="daa6cfad-2107-443c-a11e-b03eeb6ccefa" action="if" useFieldsInCommand="false">
                            <command>
                                <body>str(pcap_analysis) == &quot;True&quot; and str(errorsAndWarnings) == &quot;False&quot; and str(ls_criteria_data_error) == &quot;False&quot;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="a18bf20e-a010-45c1-875b-6f549c365098" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Check &apos;exec_ls_test_data&apos;; Act accordingly.... 2 or 3 items we can work with all others counts are bad</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="f6ff2d2d-6551-45a7-b0e1-6ac3f61dd62c" action="if" useFieldsInCommand="false">
                                            <command>
                                                <body>int(exec_ls_testdata_item_cnt) == 3:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="515e5169-aa93-47a1-a24c-4e822ec2cf81" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>print(exec_ls_testdata)</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>mapped/Json/item[1]</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>running_id</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>mapped/Json/item[2]</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>failure_originator</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>mapped/Json/item[3]</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>results_payload_uri_list</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="9d2fedd2-d022-4592-9752-3e0744a9fa66" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>ls_pcap_data_error = &quot;False&quot;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="9aebe255-c9e6-4fae-aadf-2866ee5bc943" action="elif" useFieldsInCommand="false">
                                            <command>
                                                <body>int(exec_ls_testdata_item_cnt) == 2:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="b0a467b9-0c35-43e0-bb92-35eb16e4fe36" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>print(exec_ls_testdata)</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>mapped/Json/item[1]</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>running_id</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>mapped/Json/item[2]</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>results_payload_uri_list</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="26ee39e0-be90-4420-995a-35762ee5c293" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>ls_pcap_data_error = &quot;False&quot;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="c0f55c09-ebc9-43ec-8d45-c696fc5d99c3" action="else" useFieldsInCommand="false">
                                            <command>
                                                <body>ERROR in data data return shape, can&apos;t continue with PCAP validation</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="af0ec5ef-70a5-44e5-85d2-a6dc35920842" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>ls_pcap_data_error = &quot;True&quot;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="cc0b4645-46cc-4156-8b67-92eee0ad88f4" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>str(ls_pcap_data_error) == &quot;False&quot;:</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="a3f0a4ab-b322-4986-af18-b4164e283864" action="comment" useFieldsInCommand="false">
                                            <command>
                                                <body>Message Validation Start</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="f3c2ca72-0bba-4fe4-b95d-d0e443b93098" action="message" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Information: Starting Landslide PCAP Validation</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                                        <message inherit="false"> Starting Landslide PCAP Validation</message>
                                                    </applicationProperties>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="74ff8b07-552e-443d-b103-12e96ce67d8f" action="comment" useFieldsInCommand="false">
                                            <command>
                                                <body>Call pcap_validation and do the work; based upon the return, report cause codes if failure logged</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="c2cbcf45-667d-44c1-b677-78cf293364e8" action="call" useFieldsInCommand="false">
                                                    <command>
                                                        <body>project://ai_Dish_Production/DISH_5G/Utilities/dish_tc_utilities.fftc#utility_pcap_validation -results_url_list [results_payload_uri_list] -running_id [running_id]</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                        <query>responseLine()</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>pcap_return_status</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="67ffb9e4-0c45-46ec-ad60-05a348b073cb" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>str(pcap_return_status) != &quot;PASSED&quot;:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="a8105c9a-0ab1-4c16-a0b0-7313cc774baa" action="comment" useFieldsInCommand="false">
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="e0324033-fd23-4b3a-af3d-449216bab8b9" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>write_cause_code_data = &quot;True&quot;</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="64f39003-45db-4bde-83cf-69057947018a" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>failure_originators_list.append(&apos;pcap&apos;)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="bda148a2-cce1-4e09-aeaa-94f5cb8794f9" action="comment" useFieldsInCommand="false">
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="1d1c6483-309c-43e1-a8ba-53b0af767812" action="comment" useFieldsInCommand="false">
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="65a466b9-2007-4377-ad5e-62d289644502" action="if" useFieldsInCommand="false">
                            <command>
                                <body>str(additional_validation) == &quot;True&quot;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="35c747c6-5ea7-4b90-ad7a-9c5fa1fb14b7" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Routine is just a stub; Awaiting requirements and process definition to continue/complete.</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="d2e38cfd-67cd-4b01-a4eb-2c40e42a0def" action="call" useFieldsInCommand="false">
                                    <command>
                                        <body>project://ai_Dish_Production/DISH_5G/Utilities/dish_tc_utilities.fftc#additional_validation_mgr -instance_id [tc_id] -project_id [project_id] -running_id [running_id] -validate_process_type NOT_DEFINED -validation_type_id NOT_DEFINED</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="c51372dc-1c53-4e40-a2f7-7b0d81e74eff" action="comment" useFieldsInCommand="false">
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="2bf13deb-4fb4-4ddb-bfd5-ebc2b656946f" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Add a seperator; we&apos;re done here</body>
                            </command>
                            <nestedSteps>
                                <item guid="e9373714-5f8c-4b93-a230-f2568ff15b6b" action="call" useFieldsInCommand="false">
                                    <command>
                                        <body>project://ai_Dish_Production/DISH_5G/Utilities/utils.fftc#insert_devider_string -length 135</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="64ad033c-466e-4384-8d21-e0a91370dff4" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>If a FAILURE was logged in ANY of the above validation processes.  Call &apos;write_landslide_extracted_cause_code_data&apos; and log as extracted data</body>
                    </command>
                    <nestedSteps>
                        <item guid="7256f781-e229-4686-9cab-716fc5bb435e" action="if" useFieldsInCommand="false">
                            <command>
                                <body>str(write_cause_code_data) == &quot;True&quot; and str(ls_criteria_data_error) == &quot;False&quot;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="c9f3be0f-979f-44e7-ad04-2856884f5184" action="comment" useFieldsInCommand="false">
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="81f49172-1967-4aaa-b5b2-7cccc6d02a1b" action="call" useFieldsInCommand="false">
                                    <command>
                                        <body>project://ai_Dish_Production/DISH_5G/Utilities/dish_tc_utilities.fftc#write_landslide_extracted_cause_code_data -failure_originator [failure_originators_list] -results_payload_uri_list [results_payload_uri_list]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="72d67457-93c4-405e-887c-51da24000dfb" action="comment" useFieldsInCommand="false">
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="cb04c5cc-cddd-4a2b-a138-4b64341e52cc" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>IF test failing, do RADCOM capture</body>
                    </command>
                    <nestedSteps>
                        <item guid="cc37926e-f515-4619-b652-7e273bf24c73" action="if" useFieldsInCommand="false">
                            <command>
                                <body>info(&apos;status&apos;) == &apos;Fail&apos;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="e24a8451-307d-437f-bec2-c2c3ba00f31f" action="call" useFieldsInCommand="false">
                                    <command>
                                        <body>project://ai_Dish_Production/DISH_5G/Utilities/pcap_utils.fftc#radcom_capture_if_fail(end_time=end_time, start_time=start_time, capture_type=&quot;ECP_CP_by_IMSI&quot;)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="bfa4e21a-34c7-4e89-92f7-a2cfe6d9cd76" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Display end of instance info</body>
                    </command>
                    <nestedSteps>
                        <item guid="879e6a0c-22f6-44e0-922c-b18b997ce96b" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>print(info(&apos;testCaseName&apos;, &apos;main&apos;))</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>responseLine()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>Test Case Name: {value}</message>
                                                <tag sub="false" defaultValue=""/>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="203b3253-a520-4836-afb1-1a1519d5bb74" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Report the RID information Or the error that came back from &apos;execute_dish_landslide_procedure&apos;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="d45325ba-eae5-4138-99bc-bc94cbdad34d" action="if" useFieldsInCommand="false">
                            <command>
                                <body>errorsAndWarnings:</body>
                            </command>
                            <nestedSteps>
                                <item guid="e0af1870-f2dc-43d5-8573-efeec2bc69e9" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>If we&apos;re here the exec_ls_testdata contains the errorsAndWarnings data</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="61fbb979-7b36-43c2-9f15-286450445d06" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>exec_ls_testdata</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="e32f1daa-d03f-4cc8-88da-d3314b212967" action="comment" useFieldsInCommand="false">
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="55153847-b8a8-4957-b787-3c05ddbba64d" action="else" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="59cfb6d3-c563-459d-82ec-216f32e84288" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Display the RIDs for this instance</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="03b961a4-5e66-4eb8-987b-4b6936902b32" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>rid_msg = &quot;Landslide Running IDs: &quot; + str(running_id)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="af498f43-9cf7-4150-b3b1-49f17f1ae8e6" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>print(rid_msg)</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>responseLine()</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="message">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                        <message>{value}</message>
                                                        <tag sub="false" defaultValue=""/>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="f1f79073-6076-4a9d-a722-13bba92d892e" action="comment" useFieldsInCommand="false">
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="aa60fc14-74ae-45fe-a5f6-f7ad091fcc38" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Show charts</body>
                    </command>
                    <nestedSteps>
                        <item guid="90581ad0-f058-4730-b89f-ac8e7e8e85c0" action="if" useFieldsInCommand="false">
                            <command>
                                <body>show_charts:</body>
                            </command>
                            <nestedSteps>
                                <item guid="22e53b79-bfaf-44be-a9f4-ede3742e484f" action="call" useFieldsInCommand="false">
                                    <command>
                                        <body>project://ai_Dish_Production/DISH_5G/Utilities/dish_tc_utilities.fftc#build_charts -reportData [result_list]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="b9caae63-4f58-4860-bca2-0b51470b0127" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Call post_instance_processor - Always called</body>
                    </command>
                    <nestedSteps>
                        <item guid="5afde4e4-c67d-41f3-8bd8-c04a44cf9bf2" action="if" useFieldsInCommand="false">
                            <command>
                                <body>str(ls_criteria_data_error) == &quot;False&quot;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="a2da0537-4cd3-45d6-9b7c-a148a5972b79" action="call" useFieldsInCommand="false">
                                    <command>
                                        <body>project://ai_Dish_Production/DISH_5G/Utilities/dish_tc_utilities.fftc#post_instance_processing -instance_id [tc_id] -project_id [project_id] -running_id [running_id]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="ae50936f-8cb1-4ded-9ced-a7317024b2c0" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Post-test NF activities</body>
                    </command>
                    <nestedSteps>
                        <item guid="c61984ba-676a-4033-8385-490598a2281f" action="call" useFieldsInCommand="false">
                            <command>
                                <body>restoreSubUDM()</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="8a498c23-88a7-490b-9033-204952adc648" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Close the Landslide session opened via &apos;test_instance_init&apos;</body>
                    </command>
                    <nestedSteps>
                        <item guid="f11384f1-196f-4f66-987a-67f348a553ca" action="call" useFieldsInCommand="false">
                            <command>
                                <body>project://ai_Dish_Production/DISH_5G/Utilities/dish_landslide_rest_library.fftc#dish_close_landslide -session s1</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e5f77c30-2b3a-4136-ac08-ac8ab07460d0" action="comment" useFieldsInCommand="false">
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
        <item name="saveSubUDM" isPublic="true">
            <steps>
                <item guid="81da1306-aa2d-44d2-b4c3-e096026938b7" action="if" useFieldsInCommand="false">
                    <command>
                        <body>param(&apos;UDM/hostname&apos;) != &quot;&quot;:</body>
                    </command>
                    <nestedSteps>
                        <item guid="b133004f-e62e-4aeb-a41e-925192649511" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>ipAddr = param(&apos;UDM/hostname&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="d27a666f-d81a-4ac1-9835-9a2973a50d4c" action="else" useFieldsInCommand="false">
                    <nestedSteps>
                        <item guid="24f1ad98-311d-49da-b863-fdc15d038479" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>ipAddr = param(&apos;UDM/ip_address&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="757b233e-1d51-4c58-99f1-ac309b44bd00" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>supi = param(&apos;LS_Nodal_favorite_params/ts0/tc0/UeNas5gMmSupi&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="c519c3c3-40fd-46c7-af61-d07aa6816471" action="message" useFieldsInCommand="false">
                    <command>
                        <body>Information:Saving sub [supi] on UDM for later recovery</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                        <message inherit="false">Saving sub [supi] on UDM for later recovery</message>
                    </applicationProperties>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="76bb1111-0695-471f-ba80-049f6161c0ae" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>ldap_port = param(&apos;UDM/ldap_port&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="55799f67-abe0-4703-8aa0-e8b5e9c5de4a" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>ldap_password = param(&apos;UDM/ldap_password&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="0dce3a23-6392-490b-8825-366b0657a450" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>ldap_cn = param(&apos;UDM/ldap_cn&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="eff56a2f-451a-47b3-a0e6-69650e317659" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>ldap_ip = param(&apos;UDM/ldap_ip&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="9caa78e1-d25d-466b-8d16-048f90baf0ed" action="open" session="UDM">
                    <command>
                        <body>project://di_[param(&apos;UDM/make&apos;)]/session_profiles/UDM.ffsp</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                        <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                        <sessionProperties type="com.fnfr.svt.applications.ssh.documents.SSHProperties">
                            <ipAddress inherit="false">[ipAddr]</ipAddress>
                        </sessionProperties>
                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    </applicationProperties>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/UDM.ffsp"/>
                </item>
                <item guid="40ec6cef-5a9d-4142-a5b9-a6a6bbd4cdc6" action="save_supi" session="UDM" useFieldsInCommand="false">
                    <command>
                        <body>-ldap_ip $ldap_ip -ldap_cn $ldap_cn -ldap_password $ldap_password -ldap_port $ldap_port -supi $supi</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/UDM.ffsp"/>
                </item>
                <item guid="2a36a6c4-69f2-411e-bcf5-2c707c0c9305" action="close" session="UDM">
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
            </steps>
        </item>
        <item name="deleteSubUDM" isPublic="true">
            <steps>
                <item guid="667b49c1-6208-42eb-8d02-55ac5d27c2c2" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>sub = param(&apos;LS_Nodal_favorite_params/ts0/tc0/UeNas5gMmSupi&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="dcf72f00-b23a-49fc-af98-47e09d333934" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Verify PDU session in SMF</body>
                    </command>
                    <nestedSteps>
                        <item guid="a428f1e0-8112-401b-8c0d-6a9676e56d6f" action="if" useFieldsInCommand="false">
                            <command>
                                <body>param(&apos;SMF/hostname&apos;) != &quot;&quot;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="3474e402-c461-4547-843d-2ad0ceabe1a1" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>ipAddr = param(&apos;SMF/hostname&apos;)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="30aecf89-6a5d-4336-8706-1f21ee4cad9c" action="else" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="c728569c-e54c-4c16-9059-8ffb7979300b" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>ipAddr = param(&apos;SMF/ip_address&apos;)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="36a8ab6f-1308-420c-aa8c-183b28638636" action="message" useFieldsInCommand="false">
                            <command>
                                <body>Information:Verifying subscriber [sub] has at least one PDU registered in the SMF</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                <message inherit="false">Verifying subscriber [sub] has at least one PDU registered in the SMF</message>
                            </applicationProperties>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="eec3ae4c-12d0-4de6-ae7e-ba08a014247d" action="open" session="SMF">
                            <command>
                                <body>project://di_[param(&apos;SMF/make&apos;)]/session_profiles/SMF.ffsp</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                <sessionProperties type="com.fnfr.svt.applications.ssh.documents.SSHProperties">
                                    <ipAddress inherit="false">[ipAddr]</ipAddress>
                                    <port inherit="false">[param(&apos;SMF/ssh_port&apos;)]</port>
                                    <user inherit="false">[param(&apos;SMF/username&apos;)]</user>
                                    <password inherit="false" masked="false">[param(&apos;SMF/password&apos;)]</password>
                                </sessionProperties>
                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            </applicationProperties>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/SMF.ffsp"/>
                        </item>
                        <item guid="22a83f62-1103-40ff-9c9a-3db3346c684d" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>value = []</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="8c161a89-ad49-4a1c-b909-d52f0060ffa0" action="get_subscriber_pdus" session="SMF" useFieldsInCommand="false">
                            <command>
                                <body>-supi $sub</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Json/pdus/item</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>len(value) &gt; 0</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                            <message>PDU(s) up in SMF found PDU(s): [str(value)]</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                            <message>PDUs not up yet waiting 5 sec and trying again.</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="RepeatStep">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="3" delayBetweenRepeats="5.0"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <eventHandlers>
                                <item name="OnRepeatStepMaxCountExceeded">
                                    <item actionId="DeclareExecutionIssue">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                            <message>PDUs did not come up, aborting SMF interaction.</message>
                                        </actionProperties>
                                    </item>
                                    <item actionId="FailTest">
                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    </item>
                                    <item actionId="ExitProcedure">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExitProcedurePropertyGroup"/>
                                    </item>
                                </item>
                                <item name="OnNoMatchesFound">
                                    <item actionId="DeclareExecutionIssue">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                            <message>PDUs not up yet waiting 5 sec and trying again.</message>
                                        </actionProperties>
                                    </item>
                                    <item actionId="RepeatStep">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="3" delayBetweenRepeats="5.0"/>
                                    </item>
                                </item>
                            </eventHandlers>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/SMF.ffsp"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="8840ce73-22a4-46ed-9e4e-ce4ffe5131ec" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Verify UE in Idle mode</body>
                    </command>
                    <nestedSteps>
                        <item guid="f2c04f14-05fe-4836-8bab-c9322388ab9a" action="if" useFieldsInCommand="false">
                            <command>
                                <body>param(&apos;AMF/hostname&apos;) != &quot;&quot;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="4bcd4fe8-0f66-49b0-8475-6f012d8048eb" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>ipAddr = param(&apos;AMF/hostname&apos;)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="63e93d2e-be01-46b5-af88-68dbce2ac947" action="else" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="d017ad8c-128e-41f4-8893-3862c08c0a6e" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>ipAddr = param(&apos;AMF/ip_address&apos;)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="fac5e789-0475-4d04-a0d8-960a0b660839" action="open" session="AMF">
                            <command>
                                <body>project://di_[param(&apos;AMF/make&apos;)]/session_profiles/AMF.ffsp</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                <sessionProperties type="com.fnfr.svt.applications.ssh.documents.SSHProperties">
                                    <ipAddress inherit="false">[ipAddr]</ipAddress>
                                    <user inherit="false">[param(&apos;AMF/username&apos;)]</user>
                                    <password inherit="false" masked="false">[param(&apos;AMF/password&apos;)]</password>
                                </sessionProperties>
                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            </applicationProperties>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="513fab19-f004-4015-96a3-2f35dde08ae8" action="set_write_mode_on" session="AMF" useFieldsInCommand="false">
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="465c5bb4-ddd0-499b-9bc2-5d372c7155d6" action="message" useFieldsInCommand="false">
                            <command>
                                <body>Information:Verifying UE in IDLE mode</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                <message inherit="false">Verifying UE in IDLE mode</message>
                            </applicationProperties>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="b3573d8f-5539-4f03-953d-0194dc6a48a8" action="get_subscriber_info_by_supi" session="AMF" responseMap="project://di_Nokia/response_maps/subscriber_show_plain.ffrm" useResponseMapLibraryApplicability="false" useFieldsInCommand="false">
                            <command>
                                <body>-supi $sub</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>amfCmState()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>str(value) == &quot;IDLE&quot;</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                            <message>AMF confirms that subscriber [sub] CM State is IDLE</message>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                            <message>UE has not reached IDLE state</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="RepeatStep">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="15" delayBetweenRepeats="3.0"/>
                                                    </item>
                                                    <item actionId="SkipRemainingRules">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>amfRmState()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>str(value) == &quot;REGISTERED&quot;</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                            <message>AMF confirms that subscriber [sub] RM State is REGISTERED</message>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="FailTest">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>AMF says that subscriber [sub] CM State is not REGISTERED (but should be)</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message>Exiting w/out deleting subscriber</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="ExitProcedure">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExitProcedurePropertyGroup"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <eventHandlers>
                                <item name="OnRepeatStepMaxCountExceeded">
                                    <item actionId="FailTest">
                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    </item>
                                    <item actionId="DeclareExecutionIssue">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                            <message>Timeout waiting for UE to reach IDLE state</message>
                                        </actionProperties>
                                    </item>
                                </item>
                                <item name="OnQueryExtractorInvalidQuery">
                                    <item actionId="DeclareExecutionIssue">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                            <message>UE has not reached IDLE</message>
                                        </actionProperties>
                                    </item>
                                    <item actionId="RepeatStep">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="10" delayBetweenRepeats="3.0"/>
                                    </item>
                                </item>
                                <item name="OnResponseMappingIssue">
                                    <item actionId="DeclareExecutionIssue">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                            <message>UE has not reached IDLE</message>
                                        </actionProperties>
                                    </item>
                                    <item actionId="RepeatStep">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="10" delayBetweenRepeats="3.0"/>
                                    </item>
                                    <item actionId="SkipRemainingRules">
                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    </item>
                                </item>
                            </eventHandlers>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                            <useResponseMapLibraryFromSession>false</useResponseMapLibraryFromSession>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="90767697-f3e4-42fc-be07-e94623546ab5" action="close" session="AMF" useFieldsInCommand="false">
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="3317bf58-8b83-42a7-875a-c67226f2763d" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Delete sub from UDM</body>
                    </command>
                    <nestedSteps>
                        <item guid="0cc73bd3-0533-40be-9694-fad893905f02" action="if" useFieldsInCommand="false">
                            <command>
                                <body>param(&apos;UDM/hostname&apos;) != &quot;&quot;:</body>
                            </command>
                            <nestedSteps>
                                <item guid="08a8d9ae-243b-49cf-a757-5f7f395723b9" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>ipAddr = param(&apos;UDM/hostname&apos;)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="5b8a6e5a-b588-4545-b894-8db47d7c2e15" action="else" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="0a1398e3-20a3-421d-8c3a-89eab4240e36" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>ipAddr = param(&apos;UDM/ip_address&apos;)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="9f91c1dc-91f0-4834-bdb1-2facee0aaa25" action="message" useFieldsInCommand="false">
                            <command>
                                <body>Information:Deleting sub [sub] from UDM</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                                <message inherit="false">Deleting sub [sub] from UDM</message>
                            </applicationProperties>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="681ddfc2-0f82-42b3-9ad5-7d152c24204f" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>ldap_port = param(&apos;UDM/ldap_port&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="4554a366-4317-40b6-9e03-a583049451ae" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>ldap_password = param(&apos;UDM/ldap_password&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="64b07ca2-90e6-4139-bce4-0b7a845585a5" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>ldap_cn = param(&apos;UDM/ldap_cn&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="b0904d56-9d84-40b8-ad9c-bc8974b7b451" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>ldap_ip = param(&apos;UDM/ldap_ip&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="7f5974e7-cb13-4455-8af0-9dc45a96a7f6" action="open" session="UDM">
                            <command>
                                <body>project://di_[param(&apos;UDM/make&apos;)]/session_profiles/UDM.ffsp</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                <sessionProperties type="com.fnfr.svt.applications.ssh.documents.SSHProperties">
                                    <ipAddress inherit="false">[ipAddr]</ipAddress>
                                </sessionProperties>
                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            </applicationProperties>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/UDM.ffsp"/>
                        </item>
                        <item guid="9b577d86-e10b-4354-9495-262f3f4df801" action="delete_supi" session="UDM" useFieldsInCommand="false">
                            <command>
                                <body>-ldap_ip $ldap_ip -ldap_cn $ldap_cn -ldap_password $ldap_password -ldap_port $ldap_port -supi $sub</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/UDM.ffsp"/>
                        </item>
                        <item guid="871fa288-67d0-4635-87c2-2515e3335bd9" action="close" session="UDM">
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="b4c86d6b-6d46-488e-be06-2ee5b61e3998" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Verify PDU removed from SMF</body>
                    </command>
                    <nestedSteps>
                        <item guid="28e7b66d-1bc6-4ec7-b940-710154294836" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>value = []</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                        <item guid="68200d34-fefd-4391-86d6-52065ecb7176" action="get_subscriber_pdus" session="SMF" useFieldsInCommand="false">
                            <command>
                                <body>-supi $sub</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Json/pdus/item</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>len(value) == 0</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                            <message>PDU(s) sucessfully deleted from SMF for subscriber [sub]</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                            <message>PDUs not yet removed, waiting 3 sec and trying again.</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="RepeatStep">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="5" delayBetweenRepeats="3.0"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <eventHandlers>
                                <item name="OnRepeatStepMaxCountExceeded">
                                    <item actionId="DeclareExecutionIssue">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                            <message>PDUs not removed, aborting SMF interaction.</message>
                                        </actionProperties>
                                    </item>
                                    <item actionId="FailTest">
                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    </item>
                                    <item actionId="ExitProcedure">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExitProcedurePropertyGroup"/>
                                    </item>
                                </item>
                                <item name="OnQueryExtractorInvalidQuery">
                                    <item actionId="DeclareExecutionIssue">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                            <message>PDU(s) sucessfully deleted from SMF for subscriber [sub]</message>
                                        </actionProperties>
                                    </item>
                                    <item actionId="PassTestIfNotAlreadyFailed">
                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    </item>
                                </item>
                                <item name="OnNoMatchesFound">
                                    <item actionId="DeclareExecutionIssue">
                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                            <message>PDU(s) sucessfully deleted from SMF for subscriber [sub]</message>
                                        </actionProperties>
                                    </item>
                                    <item actionId="PassTestIfNotAlreadyFailed">
                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    </item>
                                </item>
                            </eventHandlers>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/SMF.ffsp"/>
                        </item>
                        <item guid="f43f59da-690f-46f8-bb59-46185e0e6a77" action="close" session="SMF">
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                            <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
        <item name="restoreSubUDM" isPublic="true">
            <steps>
                <item guid="99715b4d-5ba1-4a79-848e-4e690439db01" action="if" useFieldsInCommand="false">
                    <command>
                        <body>param(&apos;UDM/hostname&apos;) != &quot;&quot;:</body>
                    </command>
                    <nestedSteps>
                        <item guid="46ec19f4-6341-4ff7-beea-b579979c183d" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>ipAddr = param(&apos;UDM/hostname&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="ce74ce23-a71d-4cf6-82a1-2be05c2630af" action="else" useFieldsInCommand="false">
                    <nestedSteps>
                        <item guid="2fe0fb1f-0afd-4d23-9095-84dc8c03c34e" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>ipAddr = param(&apos;UDM/ip_address&apos;)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="dd509d31-703e-4704-876b-7eb28d8d6547" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>supi = param(&apos;LS_Nodal_favorite_params/ts0/tc0/UeNas5gMmSupi&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="89b6dc2e-564c-4670-8e90-4681b8d93d75" action="message" useFieldsInCommand="false">
                    <command>
                        <body>Information:Recovering saved sub [supi] on UDM</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.MessagePropertyGroup">
                        <message inherit="false">Recovering saved sub [supi] on UDM</message>
                    </applicationProperties>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="5ee6384c-b3fa-4ed4-a23a-207829ed1050" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>ldap_port = param(&apos;UDM/ldap_port&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="6b5df0dd-1dfd-414e-9b18-3d1e658aebf6" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>ldap_password = param(&apos;UDM/ldap_password&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="469c5d8f-03e7-4792-a416-312fbad3959c" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>ldap_cn = param(&apos;UDM/ldap_cn&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="41e9e711-dd7d-48e0-af6e-8d19753821ff" action="eval" useFieldsInCommand="false">
                    <command>
                        <body>ldap_ip = param(&apos;UDM/ldap_ip&apos;)</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
                <item guid="9771a69e-cdcc-48d7-a41d-527a7d9f479d" action="open" session="UDM">
                    <command>
                        <body>project://di_[param(&apos;UDM/make&apos;)]/session_profiles/UDM.ffsp</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                        <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                        <sessionProperties type="com.fnfr.svt.applications.ssh.documents.SSHProperties">
                            <ipAddress inherit="false">[ipAddr]</ipAddress>
                        </sessionProperties>
                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    </applicationProperties>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/UDM.ffsp"/>
                </item>
                <item guid="006dd923-d569-4fb7-b965-6b8f0dacecf3" action="restore_supi" session="UDM" useFieldsInCommand="false">
                    <command>
                        <body>-ldap_ip $ldap_ip -ldap_cn $ldap_cn -ldap_password $ldap_password -ldap_port $ldap_port -supi $supi</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/UDM.ffsp"/>
                </item>
                <item guid="d306e6d9-2842-4e13-a6d1-950dbb5a899d" action="close" session="UDM">
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                    <advancedProperties defaultSessionProfile="project://di_Nokia/session_profiles/AMF.ffsp"/>
                </item>
            </steps>
        </item>
    </procedures>
</testCase>
